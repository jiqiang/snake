(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var o,c,s=n(0),r=n.n(s),a=n(5),i=n.n(a),l=(n(12),n(6)),u=n(1),h=(n(13),n(2)),d=n(3);!function(e){e[e.EMPTY=0]="EMPTY",e[e.FOOD=1]="FOOD",e[e.SNAKE=2]="SNAKE",e[e.WALL=3]="WALL"}(o||(o={})),function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(c||(c={}));var v={ArrowLeft:c.LEFT,ArrowUp:c.UP,ArrowRight:c.RIGHT,ArrowDown:c.DOWN,Left:c.LEFT,Up:c.UP,Right:c.RIGHT,Down:c.DOWN},w={ArrowLeft:c.RIGHT,ArrowUp:c.DOWN,ArrowRight:c.LEFT,ArrowDown:c.UP,Left:c.RIGHT,Up:c.DOWN,Right:c.LEFT,Down:c.UP},f=function(){function e(t,n,c){Object(h.a)(this,e),this.row=void 0,this.col=void 0,this.cellType=void 0,this.row=t,this.col=n,this.cellType=c||o.EMPTY}return Object(d.a)(e,[{key:"GetCellType",value:function(){return this.cellType}},{key:"SetCellType",value:function(e){this.cellType=e}},{key:"GetRow",value:function(){return this.row}},{key:"GetCol",value:function(){return this.col}}]),e}(),m=function(){function e(t,n){Object(h.a)(this,e),this.rowCount=void 0,this.colCount=void 0,this.cells=void 0,this.snakeCells=void 0,this.isGameOver=void 0,this.score=void 0,this.rowCount=t,this.colCount=n,this.cells=[],this.snakeCells=[new f(2,2)],this.isGameOver=!1,this.score=0,this.Initialize(),this.GenerateFoodCell()}return Object(d.a)(e,[{key:"Initialize",value:function(){for(var e=0;e<this.rowCount;e++){this.cells[e]=[];for(var t=0;t<this.colCount;t++){var n=[0,this.rowCount-1].includes(e)||[0,this.rowCount-1].includes(t),c=2===e&&2===t;this.cells[e][t]=new f(e,t,n?o.WALL:c?o.SNAKE:o.EMPTY)}}}},{key:"GetScore",value:function(){return this.score}},{key:"GetCells",value:function(){return this.cells}},{key:"IsGameOver",value:function(){return this.isGameOver}},{key:"GenerateFoodCell",value:function(){for(var e=Math.floor(Math.random()*(this.rowCount-1)),t=Math.floor(Math.random()*(this.colCount-1));[o.WALL,o.SNAKE].includes(this.cells[e][t].GetCellType());)e=Math.floor(Math.random()*(this.rowCount-1)),t=Math.floor(Math.random()*(this.colCount-1));this.cells[e][t].SetCellType(o.FOOD)}},{key:"MoveSnake",value:function(e){if(void 0!==e){var t,n,s=this.snakeCells[this.snakeCells.length-1];switch(e){case c.RIGHT:t=s.GetRow()+1,n=s.GetCol();break;case c.DOWN:t=s.GetRow(),n=s.GetCol()+1;break;case c.LEFT:t=s.GetRow()-1,n=s.GetCol();break;case c.UP:t=s.GetRow(),n=s.GetCol()-1;break;default:t=s.GetRow(),n=s.GetCol()}var r=this.cells[t][n].GetCellType();if([o.WALL,o.SNAKE].includes(r))this.isGameOver=!0;else if(this.cells[t][n].GetCellType()!==o.FOOD){this.cells[t][n].SetCellType(o.SNAKE),this.snakeCells.push(new f(t,n));var a=this.snakeCells.shift();a&&this.cells[a.GetRow()][a.GetCol()].SetCellType(o.EMPTY)}else this.cells[t][n].SetCellType(o.SNAKE),this.snakeCells.push(new f(t,n)),this.GenerateFoodCell(),this.score++}}}]),e}(),E=new m(30,30),C=function(){var e=Object(s.useState)(E.GetCells()),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(s.useState)(void 0),h=Object(u.a)(i,2),d=h[0],f=h[1],C=Object(s.useState)(void 0),G=Object(u.a)(C,2),k=G[0],O=G[1],y=Object(s.useState)([0,0]),T=Object(u.a)(y,2),p=T[0],b=T[1];Object(s.useEffect)((function(){return document.addEventListener("keydown",R),document.addEventListener("touchstart",L),document.addEventListener("touchend",A),function(){document.removeEventListener("keydown",R),document.removeEventListener("touchstart",L),document.removeEventListener("touchend",A)}}));var L=function(e){b([e.touches[0].clientX,e.touches[0].clientY])},A=function(e){var t=e.changedTouches[0].clientX-p[0],n=e.changedTouches[0].clientY-p[1];Math.abs(t)<=Math.abs(n)?n<=0?document.dispatchEvent(new KeyboardEvent("keydown",{code:"ArrowUp"})):document.dispatchEvent(new KeyboardEvent("keydown",{code:"ArrowDown"})):t<=0?document.dispatchEvent(new KeyboardEvent("keydown",{code:"ArrowLeft"})):document.dispatchEvent(new KeyboardEvent("keydown",{code:"ArrowRight"}))},R=function(e){if(!E.IsGameOver()&&(void 0===k&&O(100),!e.defaultPrevented&&v[e.code]!==d&&w[e.code]!==d)){switch(e.code){case"Down":case"ArrowDown":f(c.DOWN);break;case"Up":case"ArrowUp":f(c.UP);break;case"Left":case"ArrowLeft":f(c.LEFT);break;case"Right":case"ArrowRight":f(c.RIGHT);break;default:return}e.preventDefault()}};!function(e,t){var n=Object(s.useRef)();Object(s.useEffect)((function(){n.current=e}),[e]),Object(s.useEffect)((function(){var e;if(void 0!==t)return e=setInterval((function(){n.current()}),t),function(){return clearInterval(e)}}),[t])}((function(){console.log("tick"),E.MoveSnake(d),E.IsGameOver()&&O(void 0),a(Object(l.a)(E.GetCells()))}),k);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Scores: ",E.GetScore()),r.a.createElement("div",{className:"board"},n.map((function(e,t){return r.a.createElement("div",{className:"row",key:"row-".concat(t)},e.map((function(e,t){return r.a.createElement("div",{className:"col",key:"col-".concat(t)},r.a.createElement("div",{className:"cell ".concat(e.GetCellType()===o.FOOD&&"is-food"," ").concat(e.GetCellType()===o.SNAKE&&"is-snake"," ").concat(e.GetCellType()===o.WALL&&"is-wall")}))})))}))),r.a.createElement("div",{className:"restart",onClick:function(){E=new m(30,30),a(E.GetCells()),f(void 0),O(void 0),b([0,0])}},r.a.createElement("button",null,"Restart")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,n){e.exports=n(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.a85ab688.chunk.js.map